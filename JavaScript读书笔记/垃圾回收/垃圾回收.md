### 垃圾回收

> JavaScript会管理内存，实现垃圾回收：确定哪个变量不再使用，然后释放它的内存；
>
> 垃圾回收是每隔一段时间运行具有周期性的

垃圾回收的难点在于，如何知道该变量是否还在使用以及之后是否还继续需要使用

浏览器的发展史上，垃圾回收主要有两种策略：`标记清理`和`引用计数`：

1. 标记清理

   给内存中的每个变量加上标记，以区分哪些变量不再使用进行回收:

   变量进入上下文时，会被加上存在于上下文中的标记，离开时会加上离开标记，当垃圾回收程序执行时，首先会清除所有标记，之后在给不再使用的变量加上标记，此时带标记的变量就是待删除的变量了，之后，再将所有带有标记的变量从内存中清除，回收内存；

2. 引用清理

   当变量声明时引用数+1，当这个值赋值给其他变量时引用数同样+1，当这个变量的值被覆盖时引用数-1；

   引用数为0时，清除变量回收内存，但当一个函数执行完引用数不为0时，不会清除变量，导致内存不会被释放，因此不再被使用；



### 优化

* 对于全局变量，确定某个变量不再使用可以使用null解除引用，以便垃圾程序回收（块作用域会超出作用域会自动回收）
* 使用let、const，这两个关字子不会创建在全局作用域中
* 避免对一个对象添加、删除（先创建再补充）， 尽可能事先创建好

